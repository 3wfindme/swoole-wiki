# 编程须知

使用`Swoole-2.x`内置协程，请认真阅读本页编程须知。


严重错误
----
以下行为会导致出现严重错误，某些情况下可能会导致`PHP`发生崩溃。

* [在多个协程间共用一个连接](https://wiki.swoole.com/wiki/page/852.html)
* [在魔术方法中使用协程 API](https://wiki.swoole.com/wiki/page/853.html)
* [在反射函数中使用协程 API](https://wiki.swoole.com/wiki/page/853.html)
* [在对象析构函数中使用协程 API](https://wiki.swoole.com/wiki/page/853.html)
* [call_user_func/call_user_func_array中使用协程 API](https://wiki.swoole.com/wiki/page/853.html)
* [使用类静态变量/全局变量保存上下文](https://wiki.swoole.com/wiki/page/865.html)

扩展冲突
----
某些跟踪调试的`PHP`扩展可能会导致`Swoole 2.0`协程发生崩溃。请关闭这些相关扩展。

* xdebug
* phptrace
* aop
* molten
* xhprof

缓存区控制
----
请勿在`ob_start`和`ob_get_clean`、`ob_end_clean`中间使用协程`API`，否则会引起错乱。可将页面渲染与逻辑分离，仅在逻辑代码中使用协程`API`，在页面渲染（`ob`系列操作）处理过程中不要使用协程。